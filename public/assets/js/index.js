$(document).ready(function(){var n,r;function t(t,o,e){o.setPosition(e),o.setContent(t?"Error: The Geolocation service failed.":"Error: Your browser doesn't support geolocation."),o.open(n)}function o(){$.get("/api/CatchHistory",function(t){console.log(t);for(var o=0;o<t.length;o++){console.log(t[o].lat);var e=$("<div>").addClass("catchList").attr("id","fish-catchList-"+o);$("#fishCatch").append(e).append(t[o].fish_type);var a=$("<div>").addClass("catchList").attr("id","rig-catchList-"+o);$("#rigCatch").append(a).append(t[o].rig_type);var i=$("<div>").addClass("catchList").attr("id","time-catchList-"+o);$("#timeCatch").append(i).append(t[o].createdAt)}})}console.log("ready"),$(document).on("click","#fishLocationSubmitButton",function(t){t.stopPropagation(),navigator.geolocation.getCurrentPosition(function(t){var o={lat:t.coords.latitude,lng:t.coords.longitude};console.log(o);var e=$("#fish_type").val().trim(),a=$("#rig_type").val().trim();console.log(e);new google.maps.Marker({position:o,map:n,icon:"http://maps.google.com/mapfiles/kml/shapes/fishing.png"});n.setCenter(this.getPosition()),r.setPosition(this.getPosition()),r.setContent("{USER_HERE} has caught: ${fishType}!"),r.open(n,this);var i={fish_type:e,lat:parseFloat(t.coords.latitude),lng:parseFloat(t.coords.longitude),rig_type:a};console.log(i),$.post("/api/CatchHistory",i).then(function(t){console.log(t),location.reload()})}),$("#fishCatch").html(""),$("#rigCatch").html(""),$("#timeCatch").html(""),o()}),$(document).on("submit","#rigSubmitBtn",function(t){t.preventDefault();var o={rig_name:$("#rig_name").val().trim(),rod:$("#rod").val().trim(),reel:$("#reel").val().trim(),tackle:$("#tackle").val().trim(),info:$("#info").val().trim()};$.post("/api/Rig",o).then(function(t){console.log("Rig data: "+t),location.reload()}),$("#rig_name").val(""),$("#rod").val(""),$("#reel").val(""),$("#tackle").val(""),$("#info").val("")}),n=new google.maps.Map(document.getElementById("googleMap"),{center:{lat:0,lng:0},zoom:12}),r=new google.maps.InfoWindow,navigator.geolocation?navigator.geolocation.getCurrentPosition(function(t){var o={lat:t.coords.latitude,lng:t.coords.longitude};n.setCenter(o)},function(){t(!0,r,n.getCenter())}):t(!1,r,n.getCenter()),o()});